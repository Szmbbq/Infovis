<!DOCTYPE html>
<html>
<head>
	<title>Infomation Visualization Final Project</title>
	<script src="https://d3js.org/d3.v4.min.js"></script>
</head>
<body>
	<script type="text/javascript">
		dataset = [
					{"winScore": 8.6, "mean": 7.1, "lowScore": 7.0},
					{"winScore": 8.8, "mean": 7.3, "lowScore": 6.9},
					{"winScore": 8.3, "mean": 7.6, "lowScore": 7.3},
					{"winScore": 8.9, "mean": 7.4, "lowScore": 7.2},
					{"winScore": 9.0, "mean": 7.7, "lowScore": 7.0}
					];

		differenceData = dataset.map(function(d) {
			return {"win-mean": d["winScore"] - d["mean"],
					"mean-low": d["mean"] - d["lowScore"]}
		})

		console.log(differenceData);


		var width = 600;
		var height = 300;

		var xscale = d3.scaleLinear()
		          .domain([0, 5])
		          .range([0, 500]);


		var pyscale = d3.scaleLinear()
		                .domain([0, d3.max(differenceData, function(d) {
		                	return d["win-mean"];
		                }) + 1])
		                .range([250, 0]);

		// create svg tag
		var svg = d3.select("body")
			        .append("svg")
			        .attr("width", width)
			        .attr("height", 2 * height);

		svg.selectAll("rect")
		   .data(differenceData)
		   .enter()
		   .append("rect")
		   .style("fill", "green")
		   .attr("width", 2)
		   .attr("x", function(d, i) {
		       return xscale(i);
		   })
		   .attr("y", function(d, i) {
		   	   console.log(pyscale(d["win-mean"]));
		       return height - pyscale(d["win-mean"]);
		   })
		   .attr("height", function(d, i) {
		       return pyscale(d["win-mean"]);
		   });


		svg.selectAll("neg-rect")
		   .data(differenceData)
		   .enter()
		   .append("rect")
		   .style("fill", "red")
		   .attr("width", 2)
		   .attr("x", function(d, i) {
		       return xscale(i);
		   })
		   .attr("y", height)
		   .attr("height", function(d, i) {
		       return pyscale(d["mean-low"]);
		   })




	</script>
</body>
</html>