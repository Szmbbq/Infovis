<!DOCTYPE html>
<html>
<head>
	<title>Infomation Visualization Final Project</title>
	<script src="https://d3js.org/d3.v4.min.js"></script>
</head>
<body>
	<button id="upperBtn" onclick="hideWinMean()">Hide winning movies</button>
	<button id="lowerBtn" onclick="hideLowMean()">Hide nominated movies</button>
	<button id="rescaleBtn" onclick="rescale()">Rescale</button>
	<script type="text/javascript" src="src/data.js"></script>
	<script type="text/javascript">
		// dataset format
		dataset = [
					{"year": "1992", "winScore": 8.6, "mean": 7.1, "lowScore": 7.0, "others": [[7.2, 0.1], [7.4, 0.3], [7.7, 0.6]]},
					{"year": "1993", "winScore": 8.8, "mean": 7.3, "lowScore": 6.9, "others": [[7.1, -0.2], [7.5, 0.2], [8.5, 1.2]]},
					{"year": "1994", "winScore": 8.3, "mean": 7.6, "lowScore": 7.3, "others": [[7.4, -0.2], [8.0, 0.4], [7.8, 0.2]]},
					{"year": "1995", "winScore": 8.9, "mean": 7.4, "lowScore": 7.2, "others": [[7.3, -0.1], [8.5, 1.1], [8.3, 0.9]]},
					{"year": "1996", "winScore": 9.0, "mean": 7.7, "lowScore": 7.0, "others": [[8.9, 1.2], [8.4, 0.7], [7.9, 0.2]]}
					];

		// extract year array
		const years = Array.from(dataset, d => d["year"]);
		years.unshift("");


		// calculate stats
		var minScore = d3.min(dataset, function(d) {
			return d["lowScore"];
		});

		var differenceData = dataset.map(function(d) {
			return {"win-mean": d["winScore"] - d["mean"],
					"low-mean": d["lowScore"] - d["mean"]};
		})

		var maxWinMeanDiff = d3.max(differenceData, function(d) {
			return d["win-mean"];
		})

		var maxLowMeanDiff = d3.min(differenceData, function(d) {
			return d["low-mean"];
		})


        // setup width and height of the svg canvas
		var width = 600;
		var height = 300;

		// flags for control buttons
		var scaleSwitch = 0;

	</script>
	<script type="text/javascript" src="src/differences&dots.js"></script>
	<script type="text/javascript" src="src/transToLineChart.js"></script>
</body>
</html>